import{_ as f,e as P,L as k,r,o,c as n,a as _,d as t,F as u,f as v,n as I,t as d,w as L,b as y}from"./index-b685d04a.js";const{VITE_APP_API:h,VITE_APP_PATH:g}={VITE_APP_API:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"deliciousfood",BASE_URL:"/week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},A={data(){return{products:[],productId:"",cart:[],loadingId:"",user:{},isLoading:!1}},components:{RouterLink:P,Loading:k},methods:{getProducts(){this.isLoading=!0,this.$http.get(`${h}/v2/api/${g}/products`).then(e=>{this.products=e.data.products,this.isLoading=!1}).catch(e=>{alert(e.response.data.message)})},addToCart(e,i=1){const c={product_id:e,qty:i};this.loadingId=e,this.isLoading=!0,this.$http.post(`${h}/api/${g}/cart`,{data:c}).then(a=>{alert(a.data.message),this.loadingId="",this.isLoading=!1}).catch(a=>{alert(a)})}},mounted(){this.getProducts()}},T={class:"container"},V={class:"table align-middle"},E=t("thead",null,[t("tr",null,[t("th",null,"圖片"),t("th",null,"商品名稱"),t("th",null,"價格"),t("th")])],-1),$={style:{width:"10%"}},x={key:0,class:"h5"},C={key:1},w={class:"h6"},S={class:"h5"},B={class:"btn-group btn-group-sm"},D={type:"button",class:"btn btn-outline-secondary"},R=t("i",{class:"fa-pulse text-end"},"查看更多",-1),N=["onClick","disabled"],U=t("i",{class:"f fa-pulse"},null,-1);function z(e,i,c,a,l,p){const b=r("loading"),m=r("router-link");return o(),n(u,null,[_(b,{active:l.isLoading,"onUpdate:active":i[0]||(i[0]=s=>l.isLoading=s)},null,8,["active"]),t("div",T,[t("table",V,[E,t("tbody",null,[(o(!0),n(u,null,v(l.products,s=>(o(),n("tr",{key:s.id},[t("td",$,[t("div",{style:I([{"padding-top":"100%","background-size":"contain"},{backgroundImage:`url(${s.imageUrl})`}])},null,4)]),t("td",null,d(s.title),1),t("td",null,[s.price===s.origin_price?(o(),n("div",x,d(s.price)+" 元 ",1)):(o(),n("div",C,[t("del",w,"原價 "+d(s.origin_price)+" 元",1),t("div",S,"現在只要 "+d(s.price)+" 元",1)]))]),t("td",null,[t("div",B,[t("button",D,[_(m,{to:`/Product/${s.id}`},{default:L(()=>[R]),_:2},1032,["to"])]),t("button",{type:"button",class:"btn btn-outline-danger",onClick:F=>p.addToCart(s.id),disabled:s.id===l.loadingId},[U,y(" 加到購物車 ")],8,N)])])]))),128))])])])],64)}const O=f(A,[["render",z]]);export{O as default};
