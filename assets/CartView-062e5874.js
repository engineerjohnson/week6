import{_ as g,L as f,r as C,o as l,c as d,a as x,d as t,F as h,f as _,g as v,t as i,b as L,h as b,v as P}from"./index-e4591d58.js";const{VITE_APP_API:c,VITE_APP_PATH:r}={VITE_APP_API:"https://vue3-course-api.hexschool.io",VITE_APP_PATH:"deliciousfood",BASE_URL:"/week6/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},y={data(){return{cart:[],loadingId:"",user:{},isLoading:!1}},components:{Loading:f},methods:{getCatr(){this.isLoading=!0,this.$http.get(`${c}/api/${r}/cart`).then(s=>{this.cart=s.data.data,this.isLoading=!1})},UpdateCart(s){const o={product_id:s.product.id,qty:s.qty};this.isLoading=!0,this.$http.put(`${c}/api/${r}/cart/${s.id}`,{data:o}).then(()=>{this.getCatr(),this.isLoading=!1})},DeleteCart(s){this.loadingId=s.product_id,this.isLoading=!0,this.$http.delete(`${c}/api/${r}/cart/${s.id}`).then(()=>{this.getCatr(),this.isLoading=!1})},DeleteCartAll(){this.cart.carts.length>0?(this.isLoading=!0,this.$http.delete(`${c}/api/${r}/carts`).then(()=>{this.getCatr(),this.isLoading=!1})):alert("目前購物車裡沒有品項")}},mounted(){this.getCatr()}},V={class:"container"},$={class:"mt-4"},A={class:"text-end"},k={class:"table align-middle"},m=t("thead",null,[t("tr",null,[t("th"),t("th",null,"品名"),t("th",{style:{width:"150px"}},"數量/單位"),t("th",{class:"text-center"},"單價"),t("th",{class:"text-end"},"單品總價")])],-1),D=["onClick"],E=t("i",{class:"fa-pulse"},null,-1),T={class:"input-group input-group-sm"},U=["onUpdate:modelValue","onChange"],S=["value"],q={class:"text-center"},w={class:"text-end"},B=t("td",{colspan:"4",class:"text-end"},"總計",-1),N={class:"text-end"},R=t("td",{colspan:"4",class:"text-end text-success"},"折扣價",-1),F={class:"text-end text-success"};function H(s,o,M,O,a,u){const p=C("loading");return l(),d(h,null,[x(p,{active:a.isLoading,"onUpdate:active":o[0]||(o[0]=e=>a.isLoading=e)},null,8,["active"]),t("div",V,[t("div",$,[t("div",A,[t("button",{class:"btn btn-outline-danger",type:"button",onClick:o[1]||(o[1]=e=>u.DeleteCartAll())}," 清空購物車 ")]),t("table",k,[m,t("tbody",null,[a.cart.carts?(l(!0),d(h,{key:0},_(a.cart.carts,e=>(l(),d("tr",{key:e.id},[t("td",null,[t("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:n=>u.DeleteCart(e)},[E,L(" x ")],8,D)]),t("td",null,i(e.product.title),1),t("td",null,[t("div",T,[b(t("select",{class:"form-select","onUpdate:modelValue":n=>e.qty=n,onChange:n=>u.UpdateCart(e)},[(l(),d(h,null,_(100,n=>t("option",{value:n,key:n+"115"},i(n),9,S)),64))],40,U),[[P,e.qty]])])]),t("td",q,i(e.product.price),1),t("td",w,i(e.total),1)]))),128)):v("",!0)]),t("tfoot",null,[t("tr",null,[B,t("td",N,i(a.cart.total),1)]),t("tr",null,[R,t("td",F,i(a.cart.final_total),1)])])])])])],64)}const z=g(y,[["render",H]]);export{z as default};
